language: go

go: 
  - 1.10.x

install:
  - go get -v golang.org/x/tools/cmd/goimports

before_script:
  - GO_FILES=$(find . -type f -name '*.go' -not -path "./vendor/*")

script:
  - test -z $(goimports -d $GO_FILES) # this test asserts import ordering
  - test -z $(gofmt -s -d $GO_FILES)
  - go test -v ./...